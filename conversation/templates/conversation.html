{% extends "base.html" %}
{% load static %}

{% block title %} Conversations {% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/conversation.css' %}">
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/conversation.js' %}"></script>
{% endblock %}

{% block content %}

<div id="list_conversation">
    <div class="list-conv-title-container">
        <h1>@{{ user.username }}</h1>

        <div id="boxMyBtt">
            <button id="myBtt">
                <p>+</p>
            </button>
        </div>
    </div>

    <div id="myPopup" class="popup">
        <div class="popup-content">
            <span class="close">&times;</span>
            <h3>Ajouter une conversation</h3>
            <form id="conversationForm" method="post" action="/conversation/" enctype="multipart/form-data">
                {% csrf_token %}
                {{ form.as_p }}
                <button class="btn btn-primary" id="submit_posts" type="submit", name"save"> Add conversation </button>
            </form>
        </div>
    </div>    

    <h2>Messages</h2>
    <div id="scroll_list">
        {% for conv in conversations %}
            <!-- Ajouter un identifiant unique pour chaque paragraphe correspondant Ã  la conversation -->
            <button class="conversation" data-conversation-id="{{ conv.id }}">{{ conv.contenu }}</button>
        {% endfor %}
    </div>
</div>

<div id="messages_container">
    {% for message in messages %}
        <p class="message">{{ message.contenu }} - Auteur: {{ message.auteur }}</p>
    {% endfor %}

    <div class="message-area-container">
{#        <form id="messageForm" method="post" action="/message/" enctype="multipart/form-data">#}
{#            {% csrf_token %}#}
{#            <input type="hidden" name="conversation_id" value="{{ conversation.id }}">#}
{#            <textarea name="contenu" id="contenu" placeholder="Message"></textarea>#}
{#            <button class="btn btn-primary" id="submit_posts" type="submit", name"save"> Send message </button>#}
{#        </form>#}
        <form id="conversationForm" method="post" action="/conversation/" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form.as_p }}
{#            <textarea class="message-area" name="message-content" placeholder="Votre message">#}
{#            </textarea>#}
        </form>
    </div>
</div>

{% endblock %}
