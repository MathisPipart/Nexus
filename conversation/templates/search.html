{% extends "base.html" %}
{% load static %}
{% block title %} Inbox {% endblock %}

{% block content %}
    <link rel="stylesheet" href="{% static 'css/search.css' %}"/>

    <main>
        <div class="search-container">
            <h2>Nouveau message</h2>
            <form method="get" action="" class="search">
                <h3>Ã€ :</h3>
                <input type="text" placeholder="Recherchez un compte..." name='q' value="{{ request.GET.q }}" class="search-bar">
                <button class="search-button">Search</button>
            </form>

            <hr>

            <form method="post" action="" class="search-results">
{#                    <h3>Search Results</h3>#}
{#                    <ul>#}
{#                        <li>Result 1</li>#}
{#                        <li>Result 2</li>#}
{#                        <li>Result 3</li>#}
{#                    </ul>#}
                    {% for user in users %}
                        <a href="{% url 'directs_messages' user.id %}" class="search-results-card">
                            {% if user.socialaccount_set.all.0.get_avatar_url %}
                                <img src="{{ user.socialaccount_set.all.0.get_avatar_url }}" class="search-card-profile-picture" alt="Photo de Profil" width="50" height="50">
                            {% else %}
                                <img src="{% static 'img/no_avatar.png' %}" class="search-card-profile-picture" alt="Photo de Profil" width="50" height="50">
                            {% endif %}

                            <div class="search-card-information">
                                <p>{{ user.first_name }} {{ user.last_name }}</p>
                            </div>
                        </a>
                    {% endfor %}
            </form>

        </div>
    </main>
{% endblock %}