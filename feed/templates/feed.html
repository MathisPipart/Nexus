{% extends "base.html" %}
{% load static %}
{% block title %} Feed {% endblock %}

extra js block 
{% block extra_js %}
<script>
    var evenements = [
        {% for event in events %}
            {
                id: '{{ event.id }}',
                title: '{{ event.title }}',
                start: '{{ event.start_time|date:"c" }}',
                end: '{{ event.end_time|date:"c" }}',
                allDay: false
            }{% if not forloop.last %},{% endif %}
        {% endfor %}
    ];
</script>
{% endblock %}

{% block content %}
    <link rel="stylesheet" href="{% static 'css/feed.css' %}">

    <div class="f_feed" id="text">
        <aside class="f_events_search" id="feed-content">

            <!-- <div class="toggle-controls">
                <input type="checkbox" id="toggle-calendar" checked>
                <label for="toggle-calendar">Afficher le calendrier</label>

                <br>

                <input type="checkbox" id="toggle-lorem" checked>
                <label for="toggle-lorem">Afficher le texte</label>
            </div> -->


            <!-- <button class="boutton_choix_event" id="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <img src="{% static 'img/oeil.png' %}" alt="boutton_choix_event" style="width: 28px; height: 28px;">
            </button>

            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <label for="toggle-calendar">
                    <input type="checkbox" id="toggle-calendar" checked>
                    Afficher le calendrier
                </label>

                <div class="button_spacer"></div>

                <label for="toggle-lorem">
                    <input type="checkbox" id="toggle-lorem" checked>
                    Afficher le texte
                </label>
            </div> -->


            <h3>A venir</h3>
            <hr> <br>

            {% if user.userprofile.url is not None %}
                <div class="calendrier" id="calendar">
                    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.9/index.global.min.js"></script>
                </div>
            {% else %}
                <a href="/calendar">Entrez une url depuis la page : calendrier</a>
            {% endif %}


            <!-- <form action="#/chemin-vers-votre-script-de-recherche" method="get" class="barreDeRecherche">

                <button type="submit" class="boutonRecherche">üîç</button>
                <input type="text" name="query" placeholder="Cherchez un club" class="TexteRecherche">

            </form> -->

            <br>
            <br>

            <!-- <p class="lorem-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla pulvinar pellentesque erat. Praesent non nisi non elit feugiat eleifend.
                Suspendisse placerat risus eu justo sodales, nec accumsan augue dignissim. Morbi mollis eros vitae tellus rhoncus, quis finibus libero pellentesque.
                Nam id eleifend nisl, ac viverra magna. Curabitur magna ante, finibus vitae suscipit quis, commodo et enim.
            </p> -->
        </aside>

        <main class="f_posts" id="feed-content">

            {% if user.userprofile.role != "user" %}
            <button id="myBtn">
                <img src="{% static 'img/add_post.png' %}" alt="Ajouter Post" style="width: 28px; height: 28px;">
            </button>
            {% endif %}

            <div id="myPopup" class="popup">
                <div class="popup-content">
                    <span class="close">&times;</span>
                    <h3>Ajouter un post</h3>
                    <form method="post" action="/" enctype="multipart/form-data">

                        {% csrf_token %}
                        {{form.as_p}}
                        <button class="btn btn-primary" id="submit_posts" type="submit", name="save"> Add post </button>
                    </form>
                </div>
            </div>

            {% if posts_size == 0 %}
                <h2>Aucun post publi√©</h2>
            {% endif %}

            {% for post in posts %}
                {% include "post_template.html" with post=post %}
            {% endfor %}
        </main>

        <aside class="f_conversations" id="feed-content">
{#            <br>#}
{#            <form action="#/chemin-vers-votre-script-de-recherche" method="get" class="barreDeRecherche">#}
{##}
{#                <button type="submit" class="boutonRecherche">üîç</button>#}
{#                <input type="text" name="query" placeholder="Cherchez une conversations" class="TexteRecherche">#}
{##}
{#            </form>#}
{##}
{#            <br>#}
            <h3>Messages</h3>
            <hr> <br>

{#            {% if messages %}#}
{#                {% include 'message_list.html' with messages=messages %}#}
{#                <div class="inbox-list-message">#}
{#                    {% for message in messages %}#}
{#                        {% if message.user.id %}#}
{#                            <a href="/inbox/directs/{{ message.user.id }}" class="inbox-message-card">#}
{#                                {% if message.user.socialaccount_set.all.0.get_avatar_url %}#}
{#                                    <img src="{{ message.user.socialaccount_set.all.0.get_avatar_url }}" class="card-profile-picture" alt="Photo de Profil" width="100" height="100">#}
{#                                {% else %}#}
{#                                    <img src="{% static 'img/no_avatar.png' %}" class="card-profile-picture" alt="Photo de Profil" width="100" height="100">#}
{#                                {% endif %}#}
{##}
{#                                <div class="card-information">#}
{#                                    <p>{{ message.user.first_name }} {{ message.user.last_name }}</p>#}
{#                                </div>#}
{#                            </a>#}
{#                        {% endif %}#}
{#                    {% endfor %}#}
{#                </div>#}
{#            {% else %}#}
{#                <a href="/inbox/new/">Commencez une conversation</a>#}
{#            {% endif %}#}

            <a href="/inbox">Votre messagerie</a>

        </aside>

        <div class="floating-button">
            <!-- <button id="myBtn">
                <img src="{% static 'img/add_post.png' %}" alt="Ajouter Post" style="width: 28px; height: 28px;">
            </button> -->
            <button class="boutton_switch_page" id="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> 
                <img src="{% static 'img/swap.png' %}" alt="Ajouter Post" style="width: 28px; height: 28px; filter:invert(1);">
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <button id="dropdown-button" class="dropdown-item" data-target="f_events_search" onclick="myFunction(this)">√âv√©nements</button>
                <button id="dropdown-button" class="dropdown-item" data-target="f_posts" onclick="myFunction(this)">Feed</button>
                <button id="dropdown-button" class="dropdown-item" data-target="f_conversations" onclick="myFunction(this)">Conversations</button>
            </div>
        </div>
    </div>

{% endblock %}